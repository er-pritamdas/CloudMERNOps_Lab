## ğŸ” **Authentication vs Authorization**

| ğŸ”‘ | **Authentication**                                      | **Authorization**             |
| -- | ------------------------------------------------------------- | ----------------------------------- |
| â“ | Are you who you say you are?                                  | What actions can you perform?       |
| ğŸ§¾ | Validates identity (e.g., email/password, tokens, biometrics) | Grants permissions to use resources |
| âœ… | Login process                                                 | Access control to services          |

---

## ğŸ›¡ï¸ **What is IAM?**

**IAM (Identity and Access Management)** is an AWS service that:

* ğŸšª Authenticates users (who can *enter* AWS)
* ğŸ”‘ Authorizes actions (what they can *do* in AWS)
* ğŸ” Provides a **centralized view** of access and permissions

### ğŸ”§ Key Uses:

* Share access securely without exposing root credentials
* Apply *granular* access based on role or function
* Enforce *least privilege principle*

---

## ğŸ§° **IAM Features**

| Feature                         | Description                                                     |
| ------------------------------- | --------------------------------------------------------------- |
| ğŸŒ**Global**              | IAM is global, not Region-specific                              |
| ğŸ”—**Integrated**          | Works with most AWS services                                    |
| ğŸ‘¥**Shared Access**       | Grant access without sharing credentials                        |
| ğŸ§©**MFA**                 | Add extra security (Multi-Factor Authentication)                |
| ğŸŒ**Identity Federation** | Integrate with external identity providers (e.g., Google, Okta) |
| ğŸ’¸**Free**                | No additional cost to use IAM                                   |

---

## ğŸ‘¤ **IAM User**

* Represents a **person** or **service** accessing AWS.
* Each user has:
  * **Name**
  * **Permanent credentials** :
  * ğŸ”‘ Username & password for console access
  * ğŸ” Access key & secret for CLI/API access

> âš ï¸ **Best Practice:** Avoid attaching permissions directly to users.

---

## ğŸ‘¥ **IAM Groups**

![IAM groups](../Visuals/IAM%20groups.png)

* A **group** = collection of IAM users
* Users inherit permissions assigned to the group
* Users can be in **multiple groups**
* Groups **cannot** contain other groups

ğŸ“¦  **Example** :

* `Developers` â†’ EC2, S3 read/write
* `Security` â†’ IAM, CloudTrail read
* `Admins` â†’ Full access

> âœ… **Best Practice:** Manage access at group level for scalability and visibility.

---

## ğŸ“œ **IAM Policies**

* JSON documents that **define permissions**
* Attach to users, groups, or roles
* AWS evaluates policies during every request

### ğŸ§±  **Basic Policy Elements** :

```json
git pou{
  "Version": "2012-10-17",
  "Statement": [{
    "Effect": "Allow",
    "Action": "*",
    "Resource": "*"
  }]
}
```

| Element        | Description                                             |
| -------------- | ------------------------------------------------------- |
| `"Version"`  | Policy language version                                 |
| `"Effect"`   | Allow or Deny                                           |
| `"Action"`   | Operations allowed/denied (e.g.,`s3:PutObject`)       |
| `"Resource"` | Target AWS resources (e.g.,`arn:aws:s3:::mybucket/*`) |

> ğŸ›‘ **Explicit Deny** always overrides an Allow!

---

## ğŸ”„  **Example of Granular Policy** :

```json
{
  "Effect": "Deny",
  "Action": ["s3:*"],
  "Resource": "*",
  "Condition": {
    "StringNotEquals": {
      "aws:ResourceAccount": ["222222222222"]
    }
  }
}
```

* Denies S3 access unless it's from account `222222222222`

---

## ğŸ¦¸ **IAM Roles**

* Used to **delegate access** to users or services
* Comes with **temporary credentials**
* More secure than permanent IAM users
* Used by:
  * âœ… EC2 instances
  * âœ… Lambda functions
  * âœ… Cross-account access
  * âœ… Federated users

> ğŸ“¦ Example: An EC2 instance needs to write to S3? Assign a role with `s3:PutObject`.

---

## âœ… **IAM Best Practices**

| Best Practice                            | Why?                                                                  |
| ---------------------------------------- | --------------------------------------------------------------------- |
| ğŸ”’**Lock down root user**          | It's powerful â€” never use it daily. Enable MFA.                      |
| ğŸ§ **Use least privilege**          | Start with minimal permissions and expand as needed                   |
| ğŸ”„**Use roles over users**         | Roles = temp credentials = safer                                      |
| ğŸŒ**Use identity providers (IdP)** | Centralizes identity management via IAM Identity Center or Okta       |
| ğŸ§¹**Clean up unused identities**   | Reduces attack surface and management overhead                        |
| ğŸš«**Donâ€™t use IAM for app auth**  | IAM â‰  user login/signup for your app. Use Cognito or other services. |

---

## ğŸ” IAM vs IAM Identity Center

| Feature           | IAM                             | IAM Identity Center                      |
| ----------------- | ------------------------------- | ---------------------------------------- |
| ğŸ§ For            | Programmatic/admin access       | Web SSO & identity federation            |
| ğŸªª Identity Store | In AWS (manual users/groups)    | External (like AD, Google Workspace)     |
| ğŸ§© Use Case       | CLI/API access for AWS services | Web console access for multiple accounts |

---

## ğŸ§  **Cloud Specialist Insights** ğŸš€

1. **Avoid Wildcard Policies** : Use `"Action": "*"` only for admins. Always prefer scoped permissions in production.
2. **Use Tags in Policies** : You can tag IAM identities and use tag-based conditions to allow/deny access dynamically.
3. **Audit with IAM Access Analyzer** : Helps you detect unintended access and misconfigurations.
4. **Combine SCPs + IAM for Org Security** : In AWS Organizations, use **Service Control Policies (SCPs)** as a master permission boundary.
5. **Rotate Keys Regularly** : For programmatic access, rotate access keys using automation (e.g., via Lambda + CloudWatch).

---
