
# 📘 Section 2: Docker Fundamentals

## 2.1 Docker Architecture 🏗️

Docker follows a  **Client–Server model** :

1. **Docker Client (CLI / API)**
   * You run commands like `docker run` or `docker ps`.
   * The client communicates with the **Docker Daemon** using REST API.
2. **Docker Daemon (dockerd)**
   * Background service that manages images, containers, networks, and volumes.
   * Does the heavy lifting (building, running, distributing containers).
3. **Docker Registry**
   * Stores Docker images.
   * Public: **Docker Hub**
   * Private: Self-hosted registry.
4. **Docker Objects**
   * **Images** → Templates
   * **Containers** → Running apps
   * **Volumes** → Storage
   * **Networks** → Communication

📌 Diagram (conceptual):

<pre class="overflow-visible!" data-start="938" data-end="1293"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre!"><span><span>+</span><span>-------------------+</span><span>
|   Docker Client   |   </span><span>---> docker run, docker ps</span><span>
+</span><span>-------------------+</span><span>
         |
         v
+</span><span>-------------------+</span><span>
|  Docker Daemon    |   </span><span>---> Creates containers, manages images</span><span>
+</span><span>-------------------+</span><span>
         |
         v
+</span><span>-------------------+</span><span>
| Docker Registry   |   </span><span>---> Stores images (Hub/Private)</span><span>
+</span><span>-------------------+</span><span>
</span></span></code></div></div></pre>

---

## 2.2 First Container – Hello World 🌍

<pre class="overflow-visible!" data-start="1340" data-end="1374"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-bash"><span><span>docker run hello-world
</span></span></code></div></div></pre>

* Docker pulls the `hello-world` image (if not present).
* Creates and runs a container from it.
* Prints a message confirming installation works.

---

## 2.3 Basic Docker Commands 🐳

### 🔍 Image Commands

<pre class="overflow-visible!" data-start="1589" data-end="1733"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-bash"><span><span>docker images                </span><span># List images</span><span>
docker pull nginx            </span><span># Download image</span><span>
docker rmi <image_id>        </span><span># Remove image</span><span>
</span></span></code></div></div></pre>

### 📦 Container Commands

<pre class="overflow-visible!" data-start="1761" data-end="2218"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-bash"><span><span>docker ps                    </span><span># List running containers</span><span>
docker ps -a                 </span><span># List all (including stopped)</span><span>
docker run -it ubuntu bash   </span><span># Run Ubuntu container interactively</span><span>
docker </span><span>exec</span><span> -it <container_id> bash   </span><span># Enter a running container</span><span>
docker stop <container_id>   </span><span># Stop container</span><span>
docker start <container_id>  </span><span># Start stopped container</span><span>
docker restart <container_id> </span><span># Restart container</span><span>
docker </span><span>rm</span><span> <container_id>     </span><span># Remove container</span><span>
</span></span></code></div></div></pre>

### 🧹 System Cleanup

<pre class="overflow-visible!" data-start="2242" data-end="2325"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-bash"><span><span>docker system prune -a       </span><span># Remove unused containers/images/networks</span><span>
</span></span></code></div></div></pre>

---

## 2.4 Container Lifecycle 🔄

Think of a **container like a process** with states:

1. **Create** → `docker create`
2. **Start** → `docker start`
3. **Running** → Active state
4. **Paused** → Suspended
5. **Stopped** → `docker stop`
6. **Deleted** → `docker rm`

📌 Example:

<pre class="overflow-visible!" data-start="2607" data-end="2727"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-bash"><span><span>docker create --name myubuntu ubuntu
docker start myubuntu
docker ps
docker stop myubuntu
docker </span><span>rm</span><span> myubuntu
</span></span></code></div></div></pre>

---

## 2.5 Detached vs Attached Mode

* **Attached Mode (default)** → Container runs in the foreground.
  <pre class="overflow-visible!" data-start="2838" data-end="2871"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-bash"><span><span>docker run ubuntu
  </span></span></code></div></div></pre>
* **Detached Mode (-d)** → Container runs in background.
  <pre class="overflow-visible!" data-start="2933" data-end="3006"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-bash"><span><span>docker run -d nginx
  docker ps     </span><span># Verify it's running</span><span>
  </span></span></code></div></div></pre>

---

## 2.6 Exposing Ports 🌐

To make containers accessible outside host:

<pre class="overflow-visible!" data-start="3082" data-end="3124"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-bash"><span><span>docker run -d -p 8080:80 nginx
</span></span></code></div></div></pre>

* `8080` = host port
* `80` = container port (nginx default)
* Access via: `http://localhost:8080`

---

## 2.7 Inspecting & Monitoring Containers 🛠️

<pre class="overflow-visible!" data-start="3280" data-end="3509"><div class="contain-inline-size rounded-2xl relative bg-token-sidebar-surface-primary"><div class="sticky top-9"><div class="absolute end-0 bottom-0 flex h-9 items-center pe-2"><div class="bg-token-bg-elevated-secondary text-token-text-secondary flex items-center gap-4 rounded-sm px-2 font-sans text-xs"></div></div></div><div class="overflow-y-auto p-4" dir="ltr"><code class="whitespace-pre! language-bash"><span><span>docker logs <container_id>        </span><span># View logs</span><span>
docker inspect <container_id>     </span><span># Low-level info (JSON)</span><span>
docker stats                      </span><span># Resource usage</span><span>
docker top <container_id>         </span><span># Processes inside container</span><span>
</span></span></code></div></div></pre>

---

✅ **Summary of Section 2**

* Docker has Client, Daemon, Registry.
* Basic commands cover images & containers.
* Lifecycle = create → run → stop → delete.
* You can run in foreground/background, map ports, and monitor logs.

---


## 🔹 Image Management Commands

| Command                             | Options                  | Description                                         |
| ----------------------------------- | ------------------------ | --------------------------------------------------- |
| `docker images`                   | `-a`/`--all`         | Show all images (default hides intermediate layers) |
|                                     | `-q`/`--quiet`       | Show only image IDs                                 |
|                                     | `--digests`            | Show image digests                                  |
|                                     | `--filter <key=value>` | Filter output (e.g., dangling=true, label=...)      |
| `docker pull <image>`             | `:tag`                 | Pull a specific tag (default =`latest`)           |
|                                     | `--all-tags`           | Download all tags for the image                     |
| `docker rmi <image_id>`           | `-f`/`--force`       | Force remove image even if used by container        |
|                                     | `--no-prune`           | Do not delete untagged parents                      |
| `docker tag <src> <target>`       | —                       | Tag an image with new name                          |
| `docker save -o file.tar <image>` | —                       | Save image to tar archive                           |
| `docker load -i file.tar`         | —                       | Load image from tar archive                         |

---

## 🔹 Container Management Commands

| Command                        | Options                  | Description                                                            |
| ------------------------------ | ------------------------ | ---------------------------------------------------------------------- |
| `docker ps`                  | `-a`/`--all`         | Show all containers (running + stopped)                                |
|                                | `-q`/`--quiet`       | Show only container IDs                                                |
|                                | `--filter <key=value>` | Filter by status, name, label, etc.                                    |
| `docker run <image>`         | `-d`/`--detach`      | Run container in background                                            |
|                                | `-it`                  | Run interactively with terminal                                        |
|                                | `--name <name>`        | Assign a name to container                                             |
|                                | `-p <host:container>`  | Map host port to container port                                        |
|                                | `-v <host:container>`  | Mount volume/bind mount                                                |
|                                | `--rm`                 | Auto-remove container on exit                                          |
|                                | `--network <network>`  | Connect to custom network                                              |
|                                | `--env <key=value>`    | Set environment variables                                              |
|                                | `--cpus="1.5"`         | Limit CPU usage                                                        |
|                                | `--memory="512m"`      | Limit memory usage                                                     |
|                                | `--restart=<policy>`   | Restart policies (`no`,`always`,`on-failure`,`unless-stopped`) |
| `docker exec <container>`    | `-it`                  | Run command inside running container interactively                     |
| `docker stop <container>`    | `-t <seconds>`         | Timeout before force killing container                                 |
| `docker start <container>`   | `-a`                   | Attach to container after starting                                     |
|                                | `-i`                   | Attach STDIN                                                           |
| `docker restart <container>` | —                       | Restart container                                                      |
| `docker rm <container>`      | `-f`                   | Force remove running container                                         |
|                                | `-v`                   | Remove volumes with container                                          |
| `docker logs <container>`    | `-f`/`--follow`      | Stream logs live                                                       |
|                                | `--tail <n>`           | Show last `n`lines of logs                                           |
| `docker inspect <container>` | `--format`             | Format output (Go template)                                            |
| `docker stats`               | `--no-stream`          | Show single snapshot instead of continuous stream                      |
| `docker top <container>`     | —                       | Show running processes inside container                                |
| `docker attach <container>`  | —                       | Attach to running container's console                                  |

---

## 🔹 System & Cleanup Commands

| Command                 | Options      | Description                                                        |
| ----------------------- | ------------ | ------------------------------------------------------------------ |
| `docker system df`    | —           | Show disk usage by images, containers, volumes                     |
| `docker system prune` | `-a`       | Remove all unused containers, networks, images (not just dangling) |
|                         | `-f`       | Force cleanup without prompt                                       |
| `docker info`         | —           | Show system-wide information about Docker                          |
| `docker version`      | `--format` | Display version info in formatted way                              |

---
